<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- PWA -->
    <meta name="application-name" content="Ruta de Clientes">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="RutaClientes">

    <!-- Icons -->
    <link rel="icon" href="data:image/svg+xml,
        <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
            <text y='.9em' font-size='90' fill='%23667eea'>üó∫Ô∏è</text>
        </svg>">

    <link rel="apple-touch-icon" href="icon-152x152.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icon-167x167.png">

    <link rel="manifest" href="manifest.json">

    <title>Ruta de Clientes</title>

    <!-- CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="estilo.css">
</head>

<body>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" style="display:none;">
        <div class="spinner"></div>
    </div>

    <!-- Offline Warning -->
    <div id="offlineWarning">
        <i class="fas fa-wifi-slash me-2"></i> Est√°s offline. Algunas funciones pueden estar limitadas.
    </div>

    <div class="container py-4">

        <!-- TITLE -->
        <div class="row mb-4">
            <div class="col-12 text-center">
                <h1 class="display-5 fw-bold mb-3">Ruta de Clientes</h1>
                <p class="lead text-muted">Selecciona los clientes en el orden de visita para construir la ruta del d√≠a</p>
            </div>
        </div>

        <div class="row">

            <!-- FORM REGISTRO -->
            <div class="col-lg-4 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-white border-0 pb-0">
                        <h4 class="card-title mb-4">
                            <i class="fas fa-user-plus me-2"></i>Agregar Nuevo Cliente
                        </h4>
                    </div>

                    <div class="card-body pt-0">
                        <form id="registroForm" class="row g-3">

                            <div class="col-12">
                                <label for="nombre" class="form-label">Nombre Completo *</label>
                                <input id="nombre" type="text" class="form-control" required>
                            </div>

                            <div class="col-12">
                                <label for="telefono" class="form-label">N√∫mero de Tel√©fono *</label>
                                <input id="telefono" type="tel" class="form-control" required>
                                <small class="text-muted">10 d√≠gitos sin espacios</small>
                            </div>

                            <div class="col-12">
                                <label for="zona" class="form-label">Zona *</label>
                                <select id="zona" class="form-select" required>
                                    <option value="">Seleccionar zona</option>
                                    <option value="Zona Norte">Zona Norte</option>
                                    <option value="Zona Centro">Zona Centro</option>
                                    <option value="Zona Oriente">Zona Oriente</option>
                                    <option value="Zona Sur">Zona Sur</option>
                                    <option value="Zona Poniente">Zona Poniente</option>
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label for="lat" class="form-label">Latitud *</label>
                                <input id="lat" type="number" step="any" class="form-control" required>
                            </div>

                            <div class="col-md-6">
                                <label for="ing" class="form-label">Longitud *</label>
                                <input id="ing" type="number" step="any" class="form-control" required>
                            </div>

                            <div class="col-12 text-center pt-3">
                                <button id="btnAgregar" type="submit" class="btn btn-primary w-100">
                                    <i class="fas fa-plus-circle me-2"></i>Agregar Cliente
                                </button>
                            </div>

                        </form>
                    </div>
                </div>
            </div>

            <!-- CLIENTES DISPONIBLES -->
            <div class="col-lg-4 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-white border-0 pb-0">
                        <h4 class="card-title mb-4">
                            <i class="fas fa-users me-2"></i>Clientes Disponibles
                        </h4>
                        <p class="text-muted mb-0">Selecciona en el orden de visita.</p>
                    </div>

                    <div class="card-body pt-0">
                        <ul id="clientesRuta" class="list-group list-group-flush"></ul>
                    </div>
                </div>
            </div>

            <!-- MAPA Y RUTA -->
            <div class="col-lg-4">
                <div class="card h-100">
                    <div class="card-header bg-white border-0 pb-0">
                        <h4 class="card-title mb-4">
                            <i class="fas fa-map-marked-alt me-2"></i>Mapa de Ruta
                        </h4>
                    </div>

                    <div class="card-body pt-0">

                        <!-- MAPA -->
                        <div id="mapaRuta" class="map-container mb-4" style="height:300px;"></div>

                        <!-- DISTANCIA -->
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div>
                                <h5 class="mb-1">Distancia total:</h5>
                                <div id="distanciaTotal" class="distancia-total">0 km</div>
                            </div>

                            <button id="btnLimpiarRuta" class="btn btn-danger">
                                <i class="fas fa-trash-alt me-2"></i>Limpiar Ruta
                            </button>
                        </div>

                        <!-- LISTA DE RECORRIDO -->
                        <div id="listaRecorrido">
                            <p class="text-muted text-center mb-0">No hay clientes seleccionados</p>
                        </div>

                    </div>
                </div>
            </div>

        </div>
    </div>


    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="app.js"></script>

    <!-- Registrar Service Worker -->
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("/service-worker.js")
            .then(() => console.log("Service Worker registrado"))
            .catch(err => console.log("Error SW:", err));
        }
    </script>

</body>
</html>

